<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Usuarios</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#09CACD">
  <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.1.3/webcomponents-loader.js">
  </script>
  <script defer src="/__/firebase/5.5.4/firebase-app.js"></script>
  <script defer src="/__/firebase/5.5.4/firebase-auth.js"></script>
  <script defer src="/__/firebase/5.5.4/firebase-database.js"></script>
  <script defer src="/__/firebase/init.js"></script>
  <script type="module" src="js/form-navegacion.js"></script>
  <link rel="stylesheet" href="css/misestilos2.css">
  <link rel="shortcut icon" href="asd.ico" />
</head>

<body>
  <form-navegacion></form-navegacion>
  <header id="cabecera">
    <img class="logo" src="img/lobo.png">
    <h1>Usuarios</h1>
    <a accesskey="A" href="usuario_nuevo.html">Agregar Personal</a>

  </header>
  <section class="vista ">
    <main role="main">
      <div class="sec">
        <ul id="lista"></ul>
        <template id="templateDatos">
          <li class="bla2">
            <a class="bla"></a>
            <div></div>
            <b></b>
          </li>
        </template>
        <template id="templateVacio">
          <li>No se encontraron usuarios.</li>
        </template>
      </div>
    </main>
  </section>
  <script type="module">
    import { Util } from "./js/util.js";
    import { Dao } from "./js/dao.js";
    import { Navegacion } from "./js/navegacion.js";
    Util.registraServiceWorker();
    const ul = document.getElementById("lista");
    const templateDatos = document.getElementById("templateDatos");
    const templateVacio = document.getElementById("templateVacio");
    document.addEventListener('DOMContentLoaded', () => {
      Navegacion.sesionInicia(["Administrador"]);
      Dao.observa("Usuario", "upperCue",
        usuario => ({
          texto1: usuario.cue,
          texto2: usuario.rolIds
            ? Object.keys(usuario.rolIds).join(", ") : ""
        }),
        lista => Util.agregaFilas(ul, lista, "usuario.html",
          templateDatos, templateVacio));
    });
  </script>
</body>

<footer id="pie">
  Derechos Reservados &copy; NIGTHWOLF TEC 2018
</footer>

</html>
